<!-- ðŸ“Œ MINI FICHE : WATCH (Vue 3 - Composition API)

ðŸ’¡ RÃ´le :
- Surveille une variable rÃ©active (ref, reactive, computed).
- DÃ©clenche une fonction Ã  chaque modification de sa valeur.

ðŸ› ï¸ Syntaxe :
watch(source, (newValue, oldValue) => {
  // action Ã  exÃ©cuter
})

âš™ï¸ Options utiles :
- immediate: true  â†’ exÃ©cute au montage initial
- deep: true       â†’ surveille les propriÃ©tÃ©s internes dâ€™un objet/array

ðŸš€ Quand lâ€™utiliser ?
- ExÃ©cuter une action "effet secondaire" (reset, API call, logâ€¦)
- RÃ©agir Ã  un changement plutÃ´t que calculer une valeur dÃ©rivÃ©e
  (sinon â†’ utiliser `computed`)

Exemple :
watch(leNombre, (nv, ov) => {
  if (nv === 7) leNombre.value = 0
})
=========================================================== -->

<!-- ðŸ’¡ Exemple : Compteur avec Watcher (Vue 3 - Composition API)
     - IncrÃ©mente un nombre avec un bouton
     - Utilise watch() pour surveiller les changements
     - RÃ©initialise le compteur Ã  0 lorsque la valeur atteint 7
     =========================================================== -->

<template>
    <div class="container mx-auto p-4 md:p-8">
        <div class="card bg-base-100 shadow-xl rounded-box p-6">
            <div class="card-body text-center">
                <!-- Titre du composant -->
                <h2 class="card-title text-2xl font-bold mb-4 mx-auto">
                    Compteur avec Watcher
                </h2>

                <!-- Zone compteur -->
                <div class="flex items-center justify-center gap-4">
                    <!-- Bouton incrÃ©mentation (+1)
                         - IncrÃ©mente directement `leNombre`
                         - Effet hover : lÃ©ger zoom (scale 110%) -->
                    <button 
                        @click="leNombre++" 
                        type="button"
                        class="btn btn-success transition-transform duration-200 hover:scale-110">
                        +
                    </button>

                    <!-- Affichage de la valeur courante -->
                    <p class="text-xl font-bold">
                        Valeur actuelle : 
                        <span class="badge badge-lg badge-secondary">
                            {{ leNombre }}
                        </span>
                    </p>
                </div>
            </div>
        </div>
    </div>
</template>

<script setup lang='js'>
/**
 * Script setup Vue 3
 * Exemple d'utilisation de `ref` et `watch`
 * - leNombre : variable rÃ©active du compteur
 * - watch() : exÃ©cute une fonction Ã  chaque modification de `leNombre`
 */

import { ref, watch } from 'vue'

// DÃ©claration d'une variable rÃ©active
const leNombre = ref(0)

// Surveillance de `leNombre`
watch(leNombre, (newValue) => {
    // Si la valeur atteint 7 â†’ rÃ©initialisation du compteur
    if (newValue === 7) {
        leNombre.value = 0
    }
})
</script>
